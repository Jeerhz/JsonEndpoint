import os
import requests
from flask import Flask

app = Flask(__name__)

# Replace <your_access_token> with the actual token
ACCESS_TOKEN = "eyJ0eXAiOiJKV1QiLCJub25jZSI6ImNSaS05M2Q1NWhtQ1hPNEdlTHkzN2FsbnRfQVh0WWJhU0Zfd3d3ZktqVUUiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik1jN2wzSXo5M2c3dXdnTmVFbW13X1dZR1BrbyIsImtpZCI6Ik1jN2wzSXo5M2c3dXdnTmVFbW13X1dZR1BrbyJ9.eyJhdWQiOiIwMDAwMDAwMy0wMDAwLTAwMDAtYzAwMC0wMDAwMDAwMDAwMDAiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC9lYmFlYjc0Yy1lZWFlLTQwZjgtYjc1NS0xMGIwZTJiZjc1MjgvIiwiaWF0IjoxNzI4NDYxMDUyLCJuYmYiOjE3Mjg0NjEwNTIsImV4cCI6MTcyODU0Nzc1MiwiYWNjdCI6MCwiYWNyIjoiMSIsImFpbyI6IkFUUUF5LzhZQUFBQXo1MXAzbXFYaUowVHM2b2R6ejk4ei83UXh1eXJwRjRjbTNVbzVLMEk0a0FIVzRiUlduSUNITEJramxpN25CczQiLCJhbXIiOlsicHdkIl0sImFwcF9kaXNwbGF5bmFtZSI6IkdyYXBoIEV4cGxvcmVyIiwiYXBwaWQiOiJkZThiYzhiNS1kOWY5LTQ4YjEtYThhZC1iNzQ4ZGE3MjUwNjQiLCJhcHBpZGFjciI6IjAiLCJmYW1pbHlfbmFtZSI6IkJFTiBTQUxFTSIsImdpdmVuX25hbWUiOiJBZGxlIiwiaWR0eXAiOiJ1c2VyIiwiaXBhZGRyIjoiMzcuMTY2LjMwLjE3OSIsIm5hbWUiOiJBZGxlIEJFTiBTQUxFTS1FWFQiLCJvaWQiOiI3OWY0MTIyZi0wMDNkLTQ2ODktYjUwOS1kYzMyZTdhZTQzMGUiLCJvbnByZW1fc2lkIjoiUy0xLTUtMjEtNDY3NjE5OTQwLTkxNDU4MDg1Mi0zMDI1MjM1OTE0LTgzMzA1IiwicGxhdGYiOiIzIiwicHVpZCI6IjEwMDMyMDAzQURERkU1MEMiLCJyaCI6IjAuQVVjQVRMZXU2Njd1LUVDM1ZSQ3c0cjkxS0FNQUFBQUFBQUFBd0FBQUFBQUFBQUJIQUJnLiIsInNjcCI6IkNhbGVuZGFycy5SZWFkV3JpdGUgQ2hhdC5SZWFkIENoYXQuUmVhZEJhc2ljIENvbnRhY3RzLlJlYWRXcml0ZSBEZXZpY2VNYW5hZ2VtZW50UkJBQy5SZWFkLkFsbCBEZXZpY2VNYW5hZ2VtZW50U2VydmljZUNvbmZpZy5SZWFkLkFsbCBGaWxlcy5SZWFkV3JpdGUuQWxsIEdyb3VwLlJlYWRXcml0ZS5BbGwgSWRlbnRpdHlSaXNrRXZlbnQuUmVhZC5BbGwgTWFpbC5SZWFkIE1haWwuUmVhZFdyaXRlIE1haWxib3hTZXR0aW5ncy5SZWFkV3JpdGUgTm90ZXMuUmVhZFdyaXRlLkFsbCBvcGVuaWQgUGVvcGxlLlJlYWQgUGxhY2UuUmVhZCBQcmVzZW5jZS5SZWFkIFByZXNlbmNlLlJlYWQuQWxsIFByaW50ZXJTaGFyZS5SZWFkQmFzaWMuQWxsIFByaW50Sm9iLkNyZWF0ZSBQcmludEpvYi5SZWFkQmFzaWMgcHJvZmlsZSBSZXBvcnRzLlJlYWQuQWxsIFNpdGVzLlJlYWRXcml0ZS5BbGwgVGFza3MuUmVhZFdyaXRlIFVzZXIuUmVhZCBVc2VyLlJlYWRCYXNpYy5BbGwgVXNlci5SZWFkV3JpdGUgVXNlci5SZWFkV3JpdGUuQWxsIGVtYWlsIiwic3ViIjoiS0VmdHg3c0RlQjZINVpRSFJzenZoSFotaUlmOENmM3FjUmVhQXA1OUM0dyIsInRlbmFudF9yZWdpb25fc2NvcGUiOiJFVSIsInRpZCI6ImViYWViNzRjLWVlYWUtNDBmOC1iNzU1LTEwYjBlMmJmNzUyOCIsInVuaXF1ZV9uYW1lIjoiYWRsZS5iZW5zYWxlbS1leHRAbW91c3F1ZXRhaXJlcy5jb20iLCJ1cG4iOiJhZGxlLmJlbnNhbGVtLWV4dEBtb3VzcXVldGFpcmVzLmNvbSIsInV0aSI6ImFhZTJoMFNhbjAtbmtYMktQaDVYQUEiLCJ2ZXIiOiIxLjAiLCJ3aWRzIjpbImI3OWZiZjRkLTNlZjktNDY4OS04MTQzLTc2YjE5NGU4NTUwOSJdLCJ4bXNfY2MiOlsiQ1AxIl0sInhtc19pZHJlbCI6IjI2IDEiLCJ4bXNfc3NtIjoiMSIsInhtc19zdCI6eyJzdWIiOiJBMmQ3b2xDNXVMdVpwc0RvM2U1dFFmd2twUDFXU3BlMmV0TnBqX2RzdW5vIn0sInhtc190Y2R0IjoxNDQ0MDI3Mjk1LCJ4bXNfdGRiciI6IkVVIn0.CjsK78jHs6FplNsL6qGehfG2ysr30IVv4zH8YxikZmACAwRxwuMKvFqRxJT9vVQXdhaAETSqv1ZDHLOpSIRj1arD7_sXLHZRR6j5uy58AjGnz7HcaIvEmLjsuVilriAZSmGMTjjS02pQysblYoGNSSsz6Qdb9wum4TjHPcmQ56tW8tiZH8X3p9Img-1Sor0awmbt8SzKTtAJBk5z3m4ar4wzHIWWkK8qYncnjYHW8xwURdwPO2vNJOLBkRZtnq9o_ajHSqu9MP1m5GVGwsOWK5MCs5-w0i7NEurWIggi5eaR4YmqglN954Mn_aBsjT8ocKU6Ej-1evCA47NaAR1zuA"

url = "https://graph.microsoft.com/v1.0/sites/1b04792a-89a2-4d7e-905f-b6e907d37b65,29238cfc-18d8-4d0b-81e7-2cd5dc8894c7/drive/root:/Pilotage - Direction IT/Formatted_V4.json:/content"

@app.route('', methods=['GET'])
def get_json():
    headers = {
        "Authorization": f"Bearer {ACCESS_TOKEN}"
    }

    response = requests.get(url, headers=headers)
    response.raise_for_status()
    return response

if __name__ == '__main__':
    port = int(os.environ.get('PORT', 5000))
    app.run(host='0.0.0.0', port=port)